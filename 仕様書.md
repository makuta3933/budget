家計簿アプリ (Simple Kakeibo) 開発仕様書 v2.0
あなたは熟練したフロントエンドエンジニアです。以下の仕様に基づき、モダンで保守性の高いReactアプリケーションを構築してください。

1. プロジェクト概要
アプリ名: Simple Kakeibo

目的: 個人利用のシンプルな家計簿アプリ。日々の入力負荷を最小限に抑えつつ、収支バランスを可視化する。

プラットフォーム: Webアプリケーション（GitHub Pagesでのホスティングを想定）

デザインコンセプト: 「無印良品」のような、生成り（きなり）色、白、ダークグレーを基調としたミニマルで見やすいデザイン。

2. 技術スタック
Framework: React (Vite)

Language: TypeScript

Styling: Tailwind CSS

Icons: Lucide React

Charts: Recharts (円グラフ・棒グラフ用)

Validation: Zod (データ整合性チェック用)

Date Handling: date-fns

State/Storage: React Hooks + LocalStorage (ブラウザ保存)

サーバーサイドは不要。データは全てユーザーのブラウザ内に保存。

3. デザインガイドライン（無印風）
カラーパレット:

背景: #F7F7F7 (オフホワイト) or #EFEFEF

カード背景: #FFFFFF (白)

メインテキスト: #333333 (濃いグレー)

支出アクセント: #BF0000 (落ち着いた赤・エンジ色)

収入アクセント: #2D4C76 (落ち着いたネイビー・藍色)

ボーダー: #DDDDDD

フォント: Noto Sans JP, Helvetica Neue, sans-serif（システムフォント優先、視認性重視）

レイアウト: 余白（Padding/Margin）を多めに取り、窮屈さを排除する。角丸は小さめ（rounded-sm or rounded-md）。

4. データ構造 (TypeScript Interface)
TypeScript
// 収支タイプ
type TransactionType = 'income' | 'expense';

// 支出費目タイプ (収入の場合はnullまたは無視)
type ExpenseType = 'fixed' | 'variable'; 

// カテゴリ定義インターフェース
interface CategoryDef {
  id: string;
  name: string;
  type: TransactionType;
  expenseType?: ExpenseType; // 支出の場合のみ設定
}

interface Transaction {
  id: string;          // UUID
  date: string;        // YYYY-MM-DD
  amount: number;      // 金額
  type: TransactionType; // 収入 or 支出
  categoryId: string;  // カテゴリID (CategoryDefと紐付け)
  note?: string;       // メモ（任意）
}

// カテゴリ定数（この定義に基づき、入力時に自動で費目タイプを判定する）
const CATEGORIES: CategoryDef[] = [
  // --- 収入 ---
  { id: 'salary', name: '給与', type: 'income' },
  { id: 'bonus', name: '賞与', type: 'income' },
  { id: 'side_job', name: '副業', type: 'income' },
  { id: 'other_income', name: 'その他収入', type: 'income' },
  // --- 固定費 ---
  { id: 'housing', name: '家賃/住宅ローン', type: 'expense', expenseType: 'fixed' },
  { id: 'utilities', name: '水道光熱費', type: 'expense', expenseType: 'fixed' },
  { id: 'communication', name: '通信費', type: 'expense', expenseType: 'fixed' },
  { id: 'subscription', name: 'サブスク・保険', type: 'expense', expenseType: 'fixed' },
  // --- 変動費 ---
  { id: 'food', name: '食費', type: 'expense', expenseType: 'variable' },
  { id: 'daily', name: '日用品', type: 'expense', expenseType: 'variable' },
  { id: 'transport', name: '交通費', type: 'expense', expenseType: 'variable' },
  { id: 'fashion', name: '衣服・美容', type: 'expense', expenseType: 'variable' },
  { id: 'social', name: '交際費', type: 'expense', expenseType: 'variable' },
  { id: 'hobby', name: '趣味・娯楽', type: 'expense', expenseType: 'variable' },
  { id: 'other_expense', name: 'その他支出', type: 'expense', expenseType: 'variable' }
];
5. 機能要件
A. 入力機能（Input Section）
タブ切り替え: フォーム上部に「支出」「収入」の切り替えタブを設置。

これにより、選択できるカテゴリリストをフィルタリングする。

自動判定: カテゴリを選択すると、内部的に ExpenseType（固定/変動）は自動決定される（ユーザーに選択させない）。

入力項目: 日付（デフォルト今日）、カテゴリ、金額、メモ。

UX: 登録完了後、Toast通知（「登録しました」）を表示し、フォームをリセットする。

B. カレンダー表示（Calendar View）
月ごとのカレンダーを表示。

各日付のセルに「その日の収支」を表示。

支出がある場合: 赤文字で合計額

収入がある場合: 青文字で合計額

両方ある場合: 2行で表示

日付をクリックすると、その日のトランザクション詳細リストを表示（編集・削除可能）。

C. 分析・グラフ表示（Analysis View）
収支サマリーカード:

「今月の収入」「今月の支出」「収支差額（貯蓄額）」を大きく表示。

差額がプラスなら青系、マイナスなら赤系で強調。

カテゴリ別内訳（円グラフ）:

支出の内訳を表示。

センターに「固定費」「変動費」の比率を表示する切り替え機能があると尚良し。

推移（棒グラフ）:

直近6ヶ月の「収入 vs 支出」の棒グラフ。

D. データ管理・堅牢性
LocalStorage: useLocalStorage フックを作成し、データを永続化。

バリデーション: アプリ起動時（データ読み込み時）および登録時に Zod を使用してデータの整合性をチェックする。不正なデータがある場合はスキップまたはアラートを表示。

エクスポート機能:

JSON: バックアップ復元用。

CSV: Excel等での分析用（Shift-JISまたはUTF-8 BOM付きで、Excelで文字化けしないように配慮）。

インポート機能: JSONバックアップファイルからの復元。

6. 実装ステップの指示
以下の順序で実装コードを提示してください。

型定義とユーティリティ: types.ts と constants.ts の定義。Zodスキーマの作成。

カスタムフック: useTransactions を作成。CRUD操作、集計ロジック、CSV/JSONエクスポート機能を含める。

UIコンポーネント (Atomic): ボタン、入力フォーム、カード等の基本パーツ（Tailwindスタイリング済み）。

メイン機能実装:

InputForm: 収支切り替えタブ付きフォーム。

CalendarView: 日付ごとの集計表示。

SummaryView: グラフと収支サマリー。

統合: App.tsx で全体のルーティング（またはタブ切り替え）とレイアウトを構築。